<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Instructions | Aptitude Labs</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Inter', sans-serif; margin: 0; background: #F9FAFB; display: flex; flex-direction: column; height: 100vh; }
        .header { background: #2c3e50; color: white; padding: 15px 30px; display: flex; align-items: center; justify-content: space-between; }
        .header h1 { font-size: 1.2rem; margin: 0; }
        .user-pic { width: 40px; height: 40px; background: #fff; border-radius: 50%; }
        .container { flex: 1; display: flex; overflow: hidden; }
        .content-area { flex: 1; padding: 40px; overflow-y: auto; background: white; }
        .title-strip { background: #3D85C6; color: white; padding: 10px 15px; font-weight: bold; margin-bottom: 20px; }
        h3 { border-bottom: 1px solid #ccc; padding-bottom: 10px; }
        ul { line-height: 1.8; color: #333; font-size: 0.95rem; }
        .table-view { width: 100%; border-collapse: collapse; margin: 20px 0; font-size: 0.9rem; }
        .table-view th, .table-view td { border: 1px solid #ccc; padding: 8px; text-align: center; }
        .table-view th { background: #f0f0f0; }
        .sidebar { width: 250px; background: #EAF0F6; border-left: 1px solid #ccc; display: flex; flex-direction: column; align-items: center; padding-top: 30px; }
        .sidebar img { width: 100px; height: 100px; border: 1px solid #ccc; background: white; }
        .sidebar p { font-weight: bold; margin-top: 10px; color: #333; }
        .footer { background: #fff; padding: 15px 40px; border-top: 1px solid #ccc; display: flex; justify-content: space-between; align-items: center; }
        .btn-proceed { background: #3D85C6; color: white; border: none; padding: 12px 30px; font-weight: bold; cursor: pointer; opacity: 0.5; pointer-events: none; }
        .btn-proceed.active { opacity: 1; pointer-events: auto; background: #28A745; }
        .confirmation { display: flex; align-items: center; gap: 10px; font-size: 0.9rem; }
        input[type="checkbox"] { transform: scale(1.3); cursor: pointer; }
    </style>
</head>
<body>

    <div class="header">
        <h1>Aptitude Labs Assessment</h1>
        <div class="user-pic"></div>
    </div>

    <div class="container">
        <div class="content-area">
            <div class="title-strip">General Instructions</div>
            
            <p><strong>Please read the instructions carefully:</strong></p>
            <p><strong>Total Duration:</strong> <span id="total-duration">--</span> Minutes</p>
            
            <table class="table-view">
                <thead>
                    <tr>
                        <th>Section Name</th>
                        <th>No. of Questions</th>
                        <th>Time Limit</th>
                    </tr>
                </thead>
                <tbody id="pattern-table">
                    </tbody>
            </table>

            <h3>Marking Scheme:</h3>
            <ul>
                <li><strong>+4 Marks</strong> for every correct answer.</li>
                <li><strong>-1 Mark</strong> for every wrong answer (MCQ).</li>
                <li><strong>0 Marks</strong> for wrong answers in Short Answer (SA) / TITA.</li>
                <li><strong>0 Marks</strong> for unattempted questions.</li>
            </ul>

            <h3>Navigation Rules:</h3>
            <ul id="switching-rule">
                <li>Loading rules...</li>
            </ul>
        </div>

        <div class="sidebar">
            <img src="https://via.placeholder.com/100" alt="Student">
            <p>Candidate Name</p>
        </div>
    </div>

    <div class="footer">
        <div class="confirmation">
            <input type="checkbox" id="agree-check" onchange="toggleButton()">
            <label for="agree-check">I have read and understood the instructions. I agree that I am not carrying any prohibited gadgets.</label>
        </div>
        <button id="btn-start" class="btn-proceed" onclick="startExam()">I am ready to begin</button>
    </div>

    <script>
        // --- 1. EXAM PATTERN CONFIGURATION ---
        const PATTERNS = {
            "TEST_MOCK_1": {
                name: "Test Mock 1",
                sections: [
                    { name: "QA (Short Answer)", q: 4, time: 2 },
                    { name: "QA (MCQ)", q: 4, time: 2 },
                    { name: "Verbal Ability", q: 4, time: 1 }
                ],
                switching: false, 
                totalTime: 5
            },
            "SAMPLE": {
                name: "SAMPLE TEST",
                sections: [
                    { name: "QA (Short Answer)", q: 2, time: 2 },
                    { name: "QA (MCQ)", q: 2, time: 2 },
                    { name: "Verbal Ability", q: 2, time: 2 }
                ],
                switching: false, 
                totalTime: 6
            },
            "INDORE": {
                name: "IPMAT Indore",
                sections: [
                    { name: "QA (Short Answer)", q: 15, time: 40 },
                    { name: "QA (MCQ)", q: 30, time: 40 },
                    { name: "Verbal Ability", q: 45, time: 40 }
                ],
                switching: false,
                totalTime: 120
            },
            "ROHTAK": {
                name: "IPMAT Rohtak",
                sections: [
                    { name: "Quantitative Ability", q: 40, time: "Flexible" },
                    { name: "Logical Reasoning", q: 40, time: "Flexible" },
                    { name: "Verbal Ability", q: 40, time: "Flexible" }
                ],
                switching: true, 
                totalTime: 120
            },
            "JIPMAT": {
                name: "JIPMAT",
                sections: [
                    { name: "Quantitative Aptitude", q: 33, time: "Flexible" },
                    { name: "DILR", q: 33, time: "Flexible" },
                    { name: "Verbal Ability", q: 34, time: "Flexible" }
                ],
                switching: true,
                totalTime: 150
            }
        };

        // --- 2. DETECT PATTERN ---
        const mockId = localStorage.getItem("activeMockId") || "INDORE";
        let currentPattern = PATTERNS["INDORE"]; // Default

        if (mockId.includes("TEST")) currentPattern = PATTERNS["TEST_MOCK_1"];
        else if (mockId.includes("SAMPLE")) currentPattern = PATTERNS["SAMPLE"];
        else if (mockId.includes("ROHTAK")) currentPattern = PATTERNS["ROHTAK"];
        else if (mockId.includes("JIPMAT")) currentPattern = PATTERNS["JIPMAT"];
        else if (mockId.includes("INDORE")) currentPattern = PATTERNS["INDORE"];

        // --- 3. RENDER UI ---
        document.getElementById('total-duration').innerText = currentPattern.totalTime;
        
        const tableBody = document.getElementById('pattern-table');
        currentPattern.sections.forEach(sec => {
            tableBody.innerHTML += `
                <tr>
                    <td>${sec.name}</td>
                    <td>${sec.q}</td>
                    <td>${sec.time === "Flexible" ? "Composite Time" : sec.time + " Mins"}</td>
                </tr>
            `;
        });

        const ruleList = document.getElementById('switching-rule');
        if (currentPattern.switching) {
            ruleList.innerHTML = `<li style="color:green; font-weight:bold;">You CAN switch between sections at any time.</li>`;
        } else {
            ruleList.innerHTML = `<li style="color:red; font-weight:bold;">You CANNOT switch between sections. Each section has a fixed time limit. The system will auto-submit the section when time ends.</li>`;
        }

        // --- 4. LOGIC ---
        function toggleButton() {
            const chk = document.getElementById('agree-check');
            const btn = document.getElementById('btn-start');
            if (chk.checked) btn.classList.add('active');
            else btn.classList.remove('active');
        }

        function startExam() {
            window.location.href = "exam.html";
        }
    </script>
</body>
</html>